<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>RAD GARLINGTON ‚Äî $RAD</title>

  <link rel="icon" href="/assets/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <meta name="theme-color" content="#0A74D0">
  <meta name="application-name" content="$RAD">
  <meta name="apple-mobile-web-app-title" content="$RAD">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#0A74D0">

  <meta name="description" content="$RAD ‚Äì The meme coin with a ledger. Rad Garlington is the Protocol‚Äôs most loyal believer. Built on XRPL with 1 trillion supply.">
  <meta name="keywords" content="Rad Garlington,RAD,meme coin,XRPL,XRP Ledger,crypto,ledger meme,digital asset,XRP meme coin">

  <meta property="og:title" content="RAD GARLINGTON ‚Äî $RAD">
  <meta property="og:description" content="$RAD ‚Äì The meme coin with a ledger. Built on XRPL.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://radgarlington.io/">
  <meta property="og:site_name" content="RAD GARLINGTON">
  <meta property="og:image" content="https://github.com/radgarlington/radgarlington.io/blob/main/assets/rad_garlington.png?raw=true">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="RAD GARLINGTON ‚Äî $RAD">
  <meta name="twitter:description" content="$RAD ‚Äì The meme coin with a ledger. Built on XRPL.">
  <meta name="twitter:image" content="https://github.com/radgarlington/radgarlington.io/blob/main/assets/rad_garlington.png?raw=true">

  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    :root{ --bg:#ffffff; --ink:#0f172a; --muted:#475569; --blue:#0A74D0; --card:#f4f7fb; --ring:rgba(10,116,208,.22); }
    html { -webkit-text-size-adjust: 100%; }
    body { margin:0; background:var(--bg); color:var(--ink); font-family: Arial, sans-serif; line-height:1.5; overflow-x:hidden; min-height:100vh; display:flex; flex-direction:column; }
    main { flex: 1 0 auto; }
    p { margin:0 0 10px; }

    .hero { text-align:center; padding:6vh 5vw 2vh; background:#eaf3ff; border:2px solid #d7e7ff; border-radius:12px; max-width:960px; margin:20px auto; box-shadow:0 6px 20px rgba(2,32,71,.08); }
    .hero-img { width:55%; max-width:320px; height:auto; margin:0 auto 14px; display:block; }
    h1 { font-size: clamp(1.8rem, 6vw, 2.8rem); margin-bottom:10px; }
    .tagline { font-size: clamp(1rem, 4vw, 1.3rem); color: var(--muted); margin-bottom:4px; padding:0 10px; }

    .social { text-align:center; margin-top:14px; }
    .social a{ display:inline-block; margin:0 8px; text-decoration:none; line-height:0; vertical-align:middle; }
    .social img{ width:28px; height:28px; display:inline-block; }

    .verify { margin-top:8px; font-size:0.95rem; text-align:center; }
    .verify a{ color:var(--blue); font-weight:bold; text-decoration:none; display:inline-block; margin:0 8px; }

    .utility { text-align:center; padding:4vh 5vw 6vh; background:#f0f7ff; border:2px solid #d0e3ff; border-radius:12px; max-width:960px; margin:20px auto; box-shadow:0 6px 20px rgba(2,32,71,.08); }
    .utility h2 { font-size: clamp(1.5rem, 5vw, 2rem); margin-bottom:15px; }
    .utility p { font-size: clamp(1rem, 4vw, 1.2rem); color: var(--muted); margin:6px 0; }

    .otc-section { background: var(--card); color: var(--ink); padding: 6vh 5vw; overflow-x:hidden; }
    .otc-wrap { max-width: 900px; margin: 0 auto; text-align: center; padding: 0 12px; }
    .otc-head { display:flex; align-items:center; justify-content:center; gap:10px; flex-wrap:wrap; }
    .otc-section h2 { font-size: clamp(1.5rem, 5vw, 2rem); margin: 0; }

    .price-line{
      display:flex; flex-wrap:wrap; justify-content:center; align-items:center;
      gap:.5rem; padding:10px 14px; border-radius:14px; background:#fff; color:var(--blue);
      border:2px solid var(--blue); font-weight:800; font-size: clamp(0.95rem, 3.6vw, 1.1rem);
      letter-spacing:.2px; box-shadow:0 0 0 2px #fff inset, 0 10px 22px rgba(2,32,71,.10);
      margin:6px auto 18px; max-width:100%; white-space:normal; word-break:keep-all;
    }
    .price-line .sep{ opacity:.6 }
    .price-line .spot-rate{ flex-basis:100%; text-align:center; }

    .status-badge { display:inline-flex; align-items:center; gap:.5rem; font:600 12px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial;
      padding:.35rem .6rem; border-radius:999px; border:1px solid var(--ring); background:#fff; color:#0b3d78; user-select:none; }
    .status-dot{ width:.5rem; height:.5rem; border-radius:50%; background:#6aa1ea; }
    .status-badge.live  { background:#e8f2ff; }
    .status-badge.down  { background:#f0f6ff; }

    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:.5rem; padding:12px 18px; border-radius:10px; text-decoration:none;
      font:600 16px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; box-shadow:0 6px 20px rgba(2,32,71,.12);
      transform:translateY(0); transition:transform .12s ease, box-shadow .12s ease, opacity .12s ease; cursor:pointer; user-select:none; border:none; }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 10px 26px rgba(2,32,71,.16); }
    .btn:active{ transform:translateY(0); box-shadow:0 4px 14px rgba(2,32,71,.10); }
    .btn[aria-disabled]{ opacity:.55; cursor:not-allowed; transform:none; box-shadow:0 4px 14px rgba(2,32,71,.08); pointer-events:none; }
    .btn-primary{ background:var(--blue); color:#fff; }
    .btn-trustline{ display:inline-block; padding:12px 18px; border-radius:10px; background:var(--blue); color:#fff; text-decoration:none;
      font:600 16px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial; box-shadow:0 6px 20px rgba(2,32,71,.14); margin-top:4px; }

    input, select, textarea { font-size:16px; }
    #usdInput { width:100%; max-width:320px; -webkit-appearance:none; }

    .card { width:100%; max-width:520px; margin:0 auto; background:#fff; border:3px solid var(--blue); border-radius:12px; box-shadow:0 6px 20px rgba(2,32,71,0.08); padding:20px; text-align:center; color:var(--ink); }

    .footer { text-align:center; padding:18px 10px; font-size:0.85rem; color:var(--muted); margin-top:auto; }

    .legal-wrap{ max-width:900px; margin: 10px auto 24px; padding:0 12px; }
    .legal-title{ text-align:center; font-size:.9rem; font-weight:700; margin:10px 0 6px; }
    .legal{ text-align:center; font-size:.80rem; line-height:1.45; color:#5b6b7e; }

    .subtle { color:#64748b; font-size:.95rem; }
  </style>
</head>
<body>

  <main>
    <div class="hero">
      <img src="https://github.com/radgarlington/radgarlington.io/blob/main/assets/logo.png?raw=true" alt="$RAD Logo" class="hero-img" />
      <h1>RAD GARLINGTON ‚Äî $RAD</h1>
      <p class="tagline">The Protocol‚Äôs most loyal believer</p>
      <p style="text-align:center; margin-top:8px;">
        <strong>Token:</strong>
        <span style="color:#0A74D0; font-size:1.2em; font-weight:bold;">$RAD</span>
        &nbsp;‚Äî&nbsp;
        <strong>Issuer:</strong>
        <span style="color:#0b3d78;">rKpaNoTRdXa48W7emkKgtCLz2MuhEroU7V</span>
      </p>
    </div>

    <div class="social">
      <a href="https://x.com/radgarlington" target="_blank" rel="noopener"><img src="/assets/x.png" alt="X"></a>
      <a href="https://t.me/radgarlington" target="_blank" rel="noopener"><img src="/assets/telegram.png" alt="Telegram"></a>
    </div>

    <div class="verify">
      üîç Verify on:
      <a href="https://bithomp.com/explorer/rKpaNoTRdXa48W7emkKgtCLz2MuhEroU7V" target="_blank" rel="noopener">Bithomp</a>
      <a href="https://xrpscan.com/account/rKpaNoTRdXa48W7emkKgtCLz2MuhEroU7V" target="_blank" rel="noopener">XRPSCAN</a>
    </div>

    <div class="utility">
      <h2>The meme coin with a ledger. Powered by XRPL.</h2>
      <p>Ledger fast. Ledger clean.</p>
      <p>‚ö° Instant Transfers</p>
      <p>üí∏ Low Fees</p>
      <p>üîí Trustless Movement</p>
      <p>$RAD inherits XRPL utility.</p>
      <p>Fast, cheap, peer-to-peer.</p>
    </div>

    <div class="otc-section">
      <div class="otc-wrap">
        <div class="otc-head">
          <h2>$RAD ‚Äî OTC PRE-SALE</h2>
          <div id="liveStatus" class="status-badge down" title="OTC connectivity">
            <span class="status-dot"></span>
            <span id="liveText">OFFLINE</span>
          </div>
        </div>

        <div class="price-line" id="spotLine">
          <span>1M $RAD = $1 USD</span>
          <span class="sep">¬∑</span>
          <span>Powered by XRP</span>
          <span class="sep">¬∑</span>
          <span class="spot-rate">Live: <span id="spotVal">$‚Äî/XRP</span></span>
        </div>

        <div class="card">
          <a class="btn-trustline" href="https://xrpl.services/?issuer=rKpaNoTRdXa48W7emkKgtCLz2MuhEroU7V&currency=RAD&limit=1000000000000" target="_blank" rel="noopener">
            Set $RAD Trustline
          </a>

          <label for="usdInput" style="font-weight:bold; display:block; margin-bottom:10px; margin-top:14px;">Enter amount in USD</label>
          <input id="usdInput" type="number" inputmode="decimal" min="1" step="0.01" placeholder="1.00 USD"
                 autocomplete="off" style="padding:10px; font-size:16px; width:100%; max-width:320px; border:2px solid #cbd5e1; border-radius:8px;" />

          <div id="xrpConversion" class="subtle" style="margin-top:12px;">‚è≥ Fetching price‚Ä¶</div>
          <div id="radAmount" style="margin-top:10px; font-size:1.1rem; font-weight:bold;">ü™ô You‚Äôll receive: 0 $RAD</div>

          <div style="margin-top:14px;">
            <a id="btnBuy" class="btn btn-primary" href="#" aria-disabled title="Enter an amount to enable">üõí BUY</a>
          </div>

          <div style="margin-top:30px; font-size:0.95rem; color:var(--ink); background:#f7faff; border:2px solid #d7e7ff; padding:16px; border-radius:10px;">
            <p style="margin:0 0 8px;">üéØ <strong>OTC Rate:</strong> $0.000001 per $RAD</p>
            <p style="margin:0 0 8px;">üöÄ <strong>Public Launch Price:</strong> $0.000003 per $RAD</p>
            <p style="margin:0;">‚úÖ OTC buyers in early ‚Äî 3√ó value at launch</p>
          </div>

          <p style="margin-top:12px; font-size:0.82rem; color:#475569;">
            $RAD is a meme token on XRPL. This is not financial advice. Plans may change based on treasury, market, or protocol decisions
          </p>
        </div>

        <p class="disclaimer">üîí OTC is a one-way sale until on-chain launch. No sellbacks or redemptions during the presale phase.</p>
        <p class="countdown-warning">Countdown to public launch begins once 500B are sold ‚Äî early OTC holders lock in 3√ó value at launch.</p>
      </div>
    </div>

    <div class="litepaper-cta" style="text-align:center; margin:16px 0 6px;">
      <a class="btn btn-primary" href="https://github.com/radgarlington/radgarlington.io/blob/main/litepaper.md" target="_blank" rel="noopener">üìÑ Read the Lite Paper</a>
    </div>

    <div class="legal-wrap">
      <div class="legal-title">üõ° Legal Disclaimer</div>
      <div class="legal">
        $RAD is an independent community-driven token built on the XRP Ledger (XRPL).
        It is not affiliated with, endorsed by, or associated with Ripple Labs Inc., Brad Garlinghouse, or any related companies,
        individuals, trademarks, or intellectual property. All references to ‚ÄúRad,‚Äù ‚ÄúGarlington,‚Äù or related terminology are part
        of a fictional blockchain meme narrative developed by the $RAD team and do not depict, reference, or represent Ripple,
        Brad Garlinghouse, or any official XRP-related entities.
      </div>
    </div>
  </main>

  <div class="footer">
    ¬© 2025 RAD GARLINGTON | radgarlington.io | Powered by XRP
    <br>
    <a href="https://x.com/radgarlington" target="_blank" rel="noopener" style="color:#0A74D0; text-decoration:none; font-weight:bold;">ùïè @radgarlington</a>
    |
    <a href="https://t.me/radgarlington" target="_blank" rel="noopener" style="color:#0A74D0; text-decoration:none; font-weight:bold;">Telegram @radgarlington</a>
  </div>

<script>
  const MIN_USD = 1;

  const usdInput      = document.getElementById('usdInput');
  const xrpConversion = document.getElementById('xrpConversion');
  const radAmount     = document.getElementById('radAmount');
  const btnBuy        = document.getElementById('btnBuy');
  const liveBadge     = document.getElementById('liveStatus');
  const liveText      = document.getElementById('liveText');
  const spotVal       = document.getElementById('spotVal');

  function setBadge(state, text){
    liveBadge.classList.remove("live","down");
    liveBadge.classList.add(state);
    liveText.textContent = text;
  }

  function disableBuy(msg){
    btnBuy.setAttribute("aria-disabled","");
    btnBuy.removeAttribute("href");
    btnBuy.title = msg || "Enter an amount to enable";
  }
  function enableBuyForUSD(usd){
    const url = `/api/deeplink?usd=${encodeURIComponent(usd.toFixed(2))}&_=${Date.now()}`;
    btnBuy.removeAttribute("aria-disabled");
    btnBuy.removeAttribute("target");
    btnBuy.rel = "noopener";
    btnBuy.href = url;
    btnBuy.title = "Open in Xaman";
  }

  // fetch JSON with timeout & mode
  function fetchJSON(url, {timeout=4000, mode='same-origin'} = {}){
    return new Promise((resolve, reject)=>{
      const ctl = new AbortController();
      const t = setTimeout(()=>ctl.abort(), timeout);
      fetch(url, {
        method:'GET',
        headers:{ 'Accept':'application/json' },
        cache:'no-store',
        mode,
        signal: ctl.signal,
        credentials: mode==='same-origin' ? 'same-origin' : 'omit'
      })
      .then(r => r.ok ? r.json() : Promise.reject(new Error('HTTP '+r.status)))
      .then(j => { clearTimeout(t); resolve(j); })
      .catch(err => { clearTimeout(t); reject(err); });
    });
  }

  async function getPriceJSON(){
    const bust = `?_=${Date.now()}`;
    const errs = [];

    // 1) Same-origin (no CORS dependency)
    try { return await fetchJSON(`/api/price${bust}`, {mode:'same-origin'}); }
    catch(e){ errs.push('primary:'+e.message); }

    // 2) Absolute same-origin (handles odd base tags / CF rules)
    try { return await fetchJSON(`https://radgarlington.io/api/price${bust}`, {mode:'cors'}); }
    catch(e){ errs.push('absolute:'+e.message); }

    // 3) API subdomain fallback
    try { return await fetchJSON(`https://api.radgarlington.io/api/price${bust}`, {mode:'cors'}); }
    catch(e){ errs.push('api-subdomain:'+e.message); }

    console.warn('Price fetch failed paths ‚Üí', errs.join(' | '));
    throw new Error('all price endpoints failed');
  }

  async function getStatusJSON(){
    const bust = `?_=${Date.now()}`;
    try { return await fetchJSON(`/api/status${bust}`, {mode:'same-origin'}); }
    catch(e){
      try { return await fetchJSON(`https://api.radgarlington.io/api/status${bust}`, {mode:'cors'}); }
      catch{ return null; }
    }
  }

  async function refreshStatus(){
    const s = await getStatusJSON();
    if (s && s.ok && s.running) setBadge('live','LIVE'); else setBadge('down','OFFLINE');
  }

  const priceState = { usdPerXrp: NaN, locked: false };
  const unlocked = new URLSearchParams(location.search).has('unlock');

  function updateSpotBar(usdPerXrp){
    const rate = Number(usdPerXrp||0).toFixed(4);
    spotVal.textContent = `$${rate}/XRP`;
  }

  async function fetchUsdPerXrp(){
    const j = await getPriceJSON();
    if (!j || !j.ok) throw new Error('price not ok');
    const v = Number(j.xrp_usd);
    if (!Number.isFinite(v) || v <= 0) throw new Error('bad price');
    return v;
  }

  async function getLockedPrice(){
    if (priceState.locked && Number.isFinite(priceState.usdPerXrp)) return priceState.usdPerXrp;
    const v = await fetchUsdPerXrp();
    priceState.usdPerXrp = v;
    if (!unlocked) priceState.locked = true;
    return v;
  }

  const fmt = (n,d=6)=>Number(n).toFixed(d);

  function parseUSD(raw){
    if (raw == null) return NaN;
    const cleaned = String(raw).trim().replace(',', '.').replace(/[^\d.]/g,'');
    const parts = cleaned.split('.');
    const norm = parts.length > 2 ? parts[0] + '.' + parts.slice(1).join('') : cleaned;
    const n = Number(norm);
    return Number.isFinite(n) ? n : NaN;
  }

  async function handleUSDInput(){
    const usd = parseUSD(usdInput.value);
    xrpConversion.textContent = '‚è≥ Fetching price‚Ä¶';
    radAmount.textContent = 'ü™ô You‚Äôll receive: 0 $RAD';
    disableBuy("Enter an amount to enable");

    if (!Number.isFinite(usd) || usd < MIN_USD){
      if (usd>0) xrpConversion.textContent='‚ùå Minimum $1';
      else xrpConversion.textContent='‚è≥ Fetching price‚Ä¶';
      return;
    }

    try{
      const usdPerXrp = await getLockedPrice();
      updateSpotBar(usdPerXrp);

      const xrpNeeded = usd / usdPerXrp;
      xrpConversion.textContent = `üîÅ XRP Required: ${fmt(xrpNeeded)} XRP (Rate: $${usdPerXrp.toFixed(4)}/XRP)`;
      radAmount.textContent     = `ü™ô You‚Äôll receive: ${(usd * 1_000_000).toLocaleString()} $RAD`;

      enableBuyForUSD(usd);
    }catch(e){
      console.error('[RAD] price error:', e);
      xrpConversion.textContent = '‚ö†Ô∏è Could not fetch price';
      radAmount.textContent = 'ü™ô You‚Äôll receive: 0 $RAD';
      disableBuy("Could not fetch price");
    }
  }

  usdInput.addEventListener('input', handleUSDInput);

  (async function init(){
    try{
      setBadge('down','OFFLINE'); // will flip once status/price lands
      const p = await getLockedPrice();
      updateSpotBar(p);
      setBadge('live','LIVE');
      xrpConversion.textContent = 'Enter USD to calculate XRP';
    }catch(e){
      console.warn('[RAD] initial price failed:', e);
      updateSpotBar(0);
      xrpConversion.textContent = '‚ö†Ô∏è Could not fetch price';
    }
    setInterval(refreshStatus, 10000);
  })();
</script>

</body>
</html>
