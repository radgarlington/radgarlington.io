<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Submit Token ‚Äî The RAD Ledger</title>
<style>
*{box-sizing:border-box}
body{margin:0;background:#ffffff;color:#0f172a;font-family:Arial,system-ui,sans-serif}
header{
  text-align:center;
  padding:52px 10px 20px;
  background:#eaf3ff;
  border-bottom:2px solid #d7e7ff;
  position:relative;
}
header h1{font-size:2rem;margin:0;color:#0A74D0}
header p{margin:10px 0 0;color:#334155}
main{
  max-width:720px;margin:40px auto;padding:24px;
  border:2px solid #d0e3ff;border-radius:12px;background:#f8fbff;
  box-shadow:0 6px 20px rgba(2,32,71,.08)
}
label{display:block;margin:10px 0 4px;font-weight:600;color:#0f172a}
input,textarea{
  width:100%;padding:10px;border:1px solid #cbd5e1;border-radius:6px;
  background:#fff;font-size:.95rem
}
textarea{min-height:80px;resize:vertical}
.tier{
  margin-top:24px;padding:20px;border:2px solid #d0e3ff;
  border-radius:10px;background:#eaf3ff;position:relative
}
.tier h2{
  margin:0 0 6px;font-size:1.1rem;color:#0A74D0;
  display:flex;align-items:center;gap:6px;
}
.info-icon{
  font-size:.9rem;background:#0A74D0;color:#fff;border-radius:50%;
  width:18px;height:18px;display:inline-flex;align-items:center;
  justify-content:center;cursor:pointer;font-weight:bold;
}
button{
  background:#0A74D0;color:#fff;padding:10px 16px;border:none;
  border-radius:8px;font-weight:700;cursor:pointer;font-size:1rem;
  transition:opacity .2s ease,transform .2s ease;
}
button:hover{opacity:.9;transform:translateY(-1px)}
.xrp-display{font-size:.9rem;color:#475569;margin-top:4px}
footer{text-align:center;font-size:.85rem;color:#475569;margin-top:30px}

/* Back button */
.back-btn{
  position:absolute;top:10px;left:18px;
  background:#0A74D0;color:#fff;padding:6px 10px;border-radius:6px;
  text-decoration:none;font-weight:600;font-size:0.8rem;
  letter-spacing:0.2px;transition:opacity .2s ease,transform .2s ease;
}
.back-btn:hover{opacity:.9;transform:translateY(-1px)}

/* Info modal */
.info-modal{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.55);z-index:999;animation:fadeIn .2s ease;
}
.info-content{
  background:#fff;color:#0f172a;margin:15% auto;padding:20px;
  border-radius:10px;border:2px solid #d0e3ff;width:90%;max-width:400px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.info-content h3{margin-top:0;color:#0A74D0;font-size:1.2rem}
.info-content p{font-size:.95rem;color:#334155}
.close-info{float:right;font-size:1.3rem;cursor:pointer;color:#0A74D0}
.close-info:hover{color:#083c80}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* Payment confirmation modal */
.confirm-modal{
  display:none;position:fixed;z-index:1000;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.7);backdrop-filter:blur(4px);
}
.confirm-box{
  background:linear-gradient(180deg,#0A74D0,#083c80);
  color:#fff;padding:40px 20px;border-radius:16px;text-align:center;
  width:90%;max-width:440px;margin:20% auto;box-shadow:0 0 20px rgba(0,0,0,.5);
  animation:fadeIn .3s ease;
}
.confirm-box h2{font-size:1.5rem;margin-bottom:8px;}
.confirm-box p{margin:6px 0;color:#dce8ff}
.confirm-box .check{font-size:2.5rem;color:#ffe175;margin-bottom:12px;}
.confirm-box a{color:#ffe175;text-decoration:none;font-weight:bold;}
.confirm-box a:hover{text-decoration:underline;}
</style>
</head>
<body>

<header>
  <a href="/ledger.html" class="back-btn">‚Üê Back</a>
  <h1>Submit Your Token</h1>
  <p>Provide full details for verification and certification on <strong>The RAD Ledger</strong>.</p>
</header>

<main>
  <form id="verifyForm">
    <label>Certificate Number</label>
    <input type="text" id="certificate" placeholder="XRPL-589-#" required>
    <label>Developer</label>
    <input type="text" id="developer" placeholder="Full name or team name" required>
    <label>Developer ùïè Handle</label>
    <input type="text" id="devTwitter" placeholder="@username">
    <label>Token Name</label>
    <input type="text" id="tokenName" required>
    <label>Token Symbol</label>
    <input type="text" id="tokenSymbol" required>
    <label>Issuer</label>
    <input type="text" id="issuer" required>
    <label>Website</label>
    <input type="url" id="website" placeholder="https://">
    <label>Email</label>
    <input type="email" id="email" placeholder="example@email.com">
    <label>Social (ùïè Handle)</label>
    <input type="text" id="twitter" placeholder="@username">
    <label>Telegram</label>
    <input type="text" id="telegram" placeholder="https://t.me/...">
    <label>Seal NFT (if Certified)</label>
    <input type="url" id="sealNFT" placeholder="https://xrpscan.com/nft/...">
  </form>

  <div class="tier">
    <h2>üîÅ Renewal / Update ‚Äî $5.89 USD <span class="info-icon" data-info="renew">‚ÑπÔ∏è</span></h2>
    <div id="xrp5" class="xrp-display">Fetching XRP conversion...</div>
    <button id="renewBtn">Pay with Xumm</button>
  </div>

  <div class="tier">
    <h2>üßæ Standard Verification ‚Äî $25.89 USD <span class="info-icon" data-info="standard">‚ÑπÔ∏è</span></h2>
    <div id="xrp25" class="xrp-display">Fetching XRP conversion...</div>
    <button id="standardBtn">Pay with Xumm</button>
  </div>

  <div class="tier">
    <h2>‚úÖ Full Certified (Doxxed) ‚Äî $58.90 USD <span class="info-icon" data-info="certified">‚ÑπÔ∏è</span></h2>
    <div id="xrp58" class="xrp-display">Fetching XRP conversion...</div>
    <button id="certBtn">Pay with Xumm</button>
  </div>

  <footer>¬© 2025 The RAD Ledger | Verified by Rad Garlington</footer>
</main>

<!-- Info Modals -->
<div id="modal-renew" class="info-modal"><div class="info-content"><span class="close-info">&times;</span><h3>Renewal / Update</h3><p>Used to update existing listings or extend certification. No re-review required.</p></div></div>
<div id="modal-standard" class="info-modal"><div class="info-content"><span class="close-info">&times;</span><h3>Standard Verification</h3><p>Includes full project verification and listing on The RAD Ledger.</p></div></div>
<div id="modal-certified" class="info-modal"><div class="info-content"><span class="close-info">&times;</span><h3>Full Certified (Doxxed)</h3><p>Includes full identity verification, validation, and issuance of a Seal NFT on XRPL.</p></div></div>

<!-- Payment Confirmation Modal -->
<div id="confirmModal" class="confirm-modal">
  <div class="confirm-box">
    <div class="check">‚úÖ</div>
    <h2>Payment Verified</h2>
    <p id="amountLine">Amount: ‚Äî XRP</p>
    <p><a id="txLink" href="#" target="_blank">View Transaction</a></p>
    <p>Transaction logged on The RAD Ledger.</p>
  </div>
</div>

<script src="https://xumm.app/assets/cdn/xumm.min.js"></script>
<script>
const xumm = new Xumm("2a4001ce-0a75-42bc-8bd2-8ef096ac26d4");
const destination = "rG1pBfHDaE6Y65yoLay77zWcCR391dd4Nu";

async function updateRates(){
  try{
    const res=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd");
    const data=await res.json();
    const price=data.ripple.usd;
    document.getElementById("xrp5").textContent=`‚âà ${(5.89/price).toFixed(2)} XRP`;
    document.getElementById("xrp25").textContent=`‚âà ${(25.89/price).toFixed(2)} XRP`;
    document.getElementById("xrp58").textContent=`‚âà ${(58.90/price).toFixed(2)} XRP`;
  }catch(e){
    ["xrp5","xrp25","xrp58"].forEach(id=>document.getElementById(id).textContent="Conversion unavailable");
  }
}
updateRates();

async function pay(amountUSD, memo){
  try{
    const res=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd");
    const price=(await res.json()).ripple.usd;
    const xrp=(amountUSD/price).toFixed(2);
    const payload = {
      TransactionType:"Payment",
      Destination:destination,
      Amount:(xrp * 1_000_000).toFixed(0),
      Memos:[{Memo:{MemoData:btoa(memo)}}]
    };
    const request = await xumm.payload.createAndSubscribe(payload, e=>{
      if(e.data.signed){
        const txid=e.data.txid || e.data.payloadResponse?.txid;
        const amount=(xrp);
        document.getElementById("amountLine").textContent=`Amount: ${amount} XRP`;
        document.getElementById("txLink").href=`https://xrpscan.com/tx/${txid}`;
        document.getElementById("confirmModal").style.display="block";
        setTimeout(()=>document.getElementById("confirmModal").style.display="none",6000);
      }
    });
    window.open(request.created.next.always);
  }catch(err){
    alert("Error initializing payment. Please retry.");
  }
}

document.getElementById("renewBtn").onclick=()=>pay(5.89,"RAD LEDGER - Renewal");
document.getElementById("standardBtn").onclick=()=>pay(25.89,"RAD LEDGER - Standard Verification");
document.getElementById("certBtn").onclick=()=>pay(58.90,"RAD LEDGER - Certified Listing");

document.querySelectorAll(".info-icon").forEach(icon=>{
  icon.addEventListener("click",()=>document.getElementById(`modal-${icon.dataset.info}`).style.display="block");
});
document.querySelectorAll(".close-info").forEach(btn=>{
  btn.addEventListener("click",()=>btn.closest(".info-modal").style.display="none"));
});
window.onclick=e=>{if(e.target.classList.contains("info-modal"))e.target.style.display="none"};
</script>
</body>
</html>
