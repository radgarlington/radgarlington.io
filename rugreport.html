<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>The Rug Report ‚Äî Accountability on XRPL</title>
<style>
*{box-sizing:border-box}
body{margin:0;background:#fff;color:#0f172a;font-family:Arial,system-ui,sans-serif}

/* üîπ Shared RAD glossy button (same as Education Hub) */
.rad-btn{
  position:relative;
  overflow:hidden;
  color:#f9fafb;
  font-weight:700;
  padding:11px 20px;
  font-size:.9rem;
  border-radius:12px;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:8px;
  box-shadow:0 3px 10px rgba(15,23,42,.25);
  background:linear-gradient(145deg,#0f7cf0,#07418f);
  border:1px solid #06336f;
  cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
}
.rad-btn::before{
  content:"";
  position:absolute;
  top:-60%;
  left:-10%;
  width:130%;
  height:80%;
  background:linear-gradient(120deg,rgba(255,255,255,.6),rgba(255,255,255,0));
  opacity:.25;
  transform:skewY(-12deg);
  transition:transform .25s ease, opacity .2s ease;
}
.rad-btn span{
  position:relative;
  z-index:1;
}
.rad-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 18px rgba(15,23,42,.35);
  filter:brightness(1.03);
}
.rad-btn:hover::before{
  transform:skewY(-12deg) translateY(35%);
  opacity:.35;
}

/* Top strip above banner (left-aligned back button) */
.top-strip{
  max-width:960px;
  margin:10px auto 6px;
  padding:0 12px;
  display:flex;
  justify-content:flex-start;
}
.top-strip .rad-btn{
  padding:8px 16px;
  font-size:.85rem;
  box-shadow:0 2px 8px rgba(15,23,42,.25);
}

/* Banner */
.banner{
  background:linear-gradient(90deg,#b91c1c,#7f1d1d);
  color:#fff;text-align:center;
  padding:20px 10px 18px;
  font-size:1.05rem;font-weight:600;line-height:1.4;
  border-bottom:2px solid #7f1d1d;
  box-shadow:0 4px 10px rgba(0,0,0,.25);
}
.banner em{display:block;margin-top:6px;font-style:italic;font-weight:500;opacity:.85}

/* Header */
header{text-align:center;padding:52px 10px 20px;background:#fff5f5;border-bottom:2px solid #fca5a5}
header h1{font-size:2.2rem;margin:0;color:#b91c1c}
header p{margin:10px 0 0;color:#4b5563;font-weight:500}

/* Description */
.description{
  background:#fffbea;text-align:center;padding:20px 16px;
  border-bottom:2px solid #fef3c7;font-size:.95rem;line-height:1.6;
}
.description strong{color:#b91c1c}

/* Report Link */
.report-link-container{
  text-align:center;
  background:#fff;
  border-bottom:2px solid #fcd34d;
  padding:18px 0;
}
.report-link{
  display:inline-block;
  background:#facc15;
  color:#111827;
  font-weight:700;
  font-size:.95rem;
  text-decoration:none;
  padding:10px 18px;
  border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.25);
  border:2px solid #b45309;
  transition:all .2s ease;
}
.report-link:hover{
  background:#fde047;
  transform:translateY(-2px) scale(1.02);
}

/* Listing */
main{max-width:900px;margin:30px auto;padding:0 16px}
h2{color:#b91c1c;border-bottom:1px solid #fca5a5;padding-bottom:4px;font-size:1.3rem;margin-bottom:14px}
h3{color:#b91c1c;font-size:1.1rem;margin:10px 0}
ul{list-style:none;padding:0;margin:0}
li.entry{
  margin:6px 0;padding:8px 10px;border-bottom:1px dashed #fca5a5;
  font-size:.95rem;display:flex;justify-content:space-between;align-items:center;
  cursor:pointer;border-radius:6px;transition:background .15s ease;
}
li.entry:hover{background:#fff7f7}
li span{color:#374151;font-size:.9rem}
footer{text-align:center;padding:20px;border-top:2px solid #fca5a5;color:#475569;font-size:.9rem}

/* Modal */
.modal{display:none;position:fixed;z-index:999;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.55)}
.modal-content{
  background:#fff;color:#0f172a;margin:8% auto;padding:20px;
  border:2px solid #fca5a5;border-radius:10px;width:90%;max-width:500px;
  box-shadow:0 10px 30px rgba(0,0,0,.25)
}
.close{float:right;font-size:1.5rem;cursor:pointer;color:#b91c1c}
.close:hover{color:#7f1d1d}
.modal-content a{color:#b91c1c;text-decoration:none;font-weight:bold}
</style>
</head>

<body>

<!-- Top back button strip (same style as Education Hub) -->
<div class="top-strip">
  <a href="ledger.html" class="rad-btn">
    <span>‚Üê Back to Ledger</span>
  </a>
</div>

<div class="banner">
  ‚ö†Ô∏è Exposing the truth on XRPL ‚Äî one rug at a time.<br>
  <em>‚Äî The Rug Report</em>
</div>

<header>
  <h1>The Rug Report</h1>
  <p>Permanent record of confirmed scams, rug pulls, and fraudulent XRPL projects.</p>
</header>

<div class="description">
  <strong>The Rug Report</strong> is an extension of The RAD Ledger ‚Äî a public accountability system built on the $XRP Ledger.<br><br>
  Every entry here represents a project or developer <strong>proven</strong> to have engaged in fraudulent behavior, vanished with funds, or misled investors.<br><br>
  No speculation. No bias. Just verifiable, on-ledger truth.
</div>

<div class="report-link-container">
  <a href="#report-section" class="report-link">üì© Submit a Report (Coming Soon)</a>
</div>

<main>
  <section id="report-list">
    <h2>üö® Flagged Projects</h2>

    <div id="rugList">
      <p style="color:#4b5563;font-size:.95rem;">Loading flagged projects...</p>
    </div>

  </section>

  <section id="report-section" style="background:#fff7f7;border:2px solid #fca5a5;border-radius:12px;padding:28px;text-align:center;margin:40px 0">
    <h2>üì© Submit a Rug Report</h2>
    <p>Community submissions will open soon. You‚Äôll be able to provide evidence, links, and wallet trails directly for review and verification.</p>
    <p style="margin-top:10px;font-style:italic;color:#6b7280;">Until then, all reports are reviewed manually by The RAD Ledger team.</p>
  </section>
</main>

<footer>¬© 2025 The RAD Ledger | The Rug Report Division</footer>

<!-- Modal -->
<div id="tokenModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2 id="modalToken">$RUG</h2>

    <p><strong>Reason:</strong> <span id="modalReason"></span></p>
    <p><strong>Details:</strong> <span id="modalDetails"></span></p>
    <p><strong>Developer:</strong> <span id="modalDev"></span></p>
    <p><strong>Issuer:</strong> <span id="modalIssuer"></span></p>
    <p><strong>Evidence:</strong> <a id="modalProof" href="#" target="_blank">View On-Ledger Proof</a></p>
  </div>
</div>

<script>
let rugData = [];
let rugModal = null;

function getGroupLetter(label){
  const raw = label || "";
  const clean = raw.replace(/^[$@]/, "");
  const ch = clean.charAt(0) || "#";
  return ch.toUpperCase();
}

function renderRugReport(){
  const container = document.getElementById("rugList");
  if(!container) return;

  if(!rugData.length){
    container.innerHTML = '<p style="color:#4b5563;font-size:.95rem;">No flagged projects have been published yet.</p>';
    return;
  }

  const grouped = {};
  rugData.forEach(entry => {
    const label = entry.token || entry.label || "Unknown";
    const letter = getGroupLetter(label);
    if(!grouped[letter]) grouped[letter] = [];
    grouped[letter].push(entry);
  });

  const letters = Object.keys(grouped).sort();
  container.innerHTML = "";

  letters.forEach(letter => {
    const block = document.createElement("div");
    const itemsHtml = grouped[letter].map(entry => {
      const label   = entry.token || entry.label || "Unknown";
      const status  = entry.status || entry.reason || "Flagged";
      const year    = entry.year || "";
      const subtitle = year ? `${status} ‚Äî ${year}` : status;
      const dataToken = JSON.stringify(entry).replace(/'/g,"&#39;");
      return `
        <li class="entry" data-token='${dataToken}'>
          <span>üü• ${label}</span>
          <span>${subtitle}</span>
        </li>
      `;
    }).join("");

    block.innerHTML = `<h3>${letter}</h3><ul>${itemsHtml}</ul>`;
    container.appendChild(block);
  });
}

async function loadRugReport(){
  const container = document.getElementById("rugList");
  if(container){
    container.innerHTML = '<p style="color:#4b5563;font-size:.95rem;">Loading flagged projects...</p>';
  }

  try{
    const res = await fetch("rug-report.json", { cache: "no-store" });
    if(!res.ok) throw new Error("Failed to load rug-report.json");
    const data = await res.json();
    rugData = Array.isArray(data) ? data : [];
    renderRugReport();
  }catch(err){
    console.error(err);
    if(container){
      container.innerHTML = '<p style="color:#b91c1c;font-weight:600;">Error loading Rug Report data. Try refreshing.</p>';
    }
  }
}

document.addEventListener("click", e => {
  const li = e.target.closest(".entry");
  if(!li || !li.dataset.token || !rugModal) return;

  let data;
  try{
    data = JSON.parse(li.dataset.token.replace(/&#39;/g,"'"));
  }catch(err){
    console.error("Error parsing rug entry data", err);
    return;
  }

  document.getElementById("modalToken").textContent   = data.token || data.label || "Unknown";
  document.getElementById("modalReason").textContent  = data.reason || data.status || "Flagged";
  document.getElementById("modalDetails").textContent = data.details || "‚Äî";
  document.getElementById("modalDev").textContent     = data.dev || "Unknown";
  document.getElementById("modalIssuer").textContent  = data.issuer || "UNKNOWN";

  const proofEl = document.getElementById("modalProof");
  if(data.proof){
    proofEl.href = data.proof;
  }else{
    proofEl.href = "#";
  }

  rugModal.style.display = "block";
});

document.addEventListener("DOMContentLoaded", () => {
  rugModal = document.getElementById("tokenModal");

  const closeBtn = document.querySelector(".close");
  if(closeBtn){
    closeBtn.onclick = () => { rugModal.style.display = "none"; };
  }

  window.onclick = e => {
    if(e.target === rugModal){
      rugModal.style.display = "none";
    }
  };

  const reportLink = document.querySelector(".report-link");
  if(reportLink){
    reportLink.addEventListener("click", e => {
      e.preventDefault();
      const target = document.querySelector("#report-section");
      if(target){
        target.scrollIntoView({ behavior: "smooth" });
      }
    });
  }

  loadRugReport();
});
</script>

</body>
</html>
